{{!--
Sidebar component
--}}

<aside class="gh-sidebar">
    <div class="gh-sidebar-inner">

        <div class="gh-sidebar-header">
            <h1 class="gh-sidebar-title">
                <a href="{{@site.url}}">{{@site.title}}</a>
            </h1>
            {{#if @site.description}}
                <p class="gh-sidebar-description">{{@site.description}}</p>
            {{/if}}
            {{#if @site.navigation}}
                <nav class="gh-sidebar-nav">
                    {{navigation}}
                </nav>
            {{/if}}
        </div>

        {{!-- Fetch all tags once and filter in template --}}
        {{#get "tags" limit="all" include="count.posts"}}
            <div class="gh-sidebar-section">
                <h3 class="gh-sidebar-section-title">Topics</h3>
                <ul class="gh-sidebar-list">
                {{#foreach tags}}
                    {{!-- Content type tags: name starts with "content-type-" --}}
                    {{#match name "~^content-type-"}}
                    <li class="gh-sidebar-list-item">
                        <a href="{{url}}">{{replace name "content-type-" ""}}</a>
                    </li>
                    {{/match}}
                {{/foreach}}
                </ul>
            </div>

            <div class="gh-sidebar-section">
                <h3 class="gh-sidebar-section-title">Tags</h3>
                <ul class="gh-sidebar-list">
                {{#foreach tags}}
                    {{!-- Regular tags: name does NOT start with "content-type-" --}}
                    {{#match name "!~^content-type-"}}
                    <li class="gh-sidebar-list-item">
                        <a href="{{url}}">{{name}}</a>
                    </li>
                    {{/match}}
                {{/foreach}}
                </ul>
            </div>
        {{/get}}

    </div>
</aside>
